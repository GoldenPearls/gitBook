# 6장 프록시

웹 프록시 서버는 중개자다. 프록시는 클라이언트와 서버 사이에 위치하여, 그들 사이의 HTTP 메시지를 정리하는 중개인처 럼동작한다.

## 1. 웹 중개자

### 0) 프롤로그

웹 프록시 서버는 클라이언트의 입장에서 트랜잭션을 수행하는 중개인입니다. 프록시가 없다면, 클라이언트는 HTTP 서버와 직접 이야기합니다.

> 트랜잭션 완료하는 것이 클라이언트라는 점은 변하지 않지만, 프록시 서버가 제공하는 좋은 서비스를 이용하게 됩니다.

H TTP 프록시 서버는 웹 서버이기도 하고 웹 클라이언트기도 합니다.&#x20;

<figure><img src="../../../../.gitbook/assets/image (396).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../../../.gitbook/assets/image (398).png" alt=""><figcaption></figcaption></figure>



### 1) 개인 프록시와 공유 프록시

프록시 서버는 하나의 클라이언트가 독점적으로 사용할 수 있고, 여러 클라이언트가 공유할 수도 있습니다.&#x20;

#### &#x20;공용 프록시 (Shared Proxies) 및 중앙 집중형 관리

* 대부분 공용/공유 프록시: 여전히 많은 프록시 서비스, 특히 무료 프록시나 저가형 데이터센터 프록시는 공유(Shared) 방식으로 운영됩니다. 다수의 사용자가 하나의 IP 주소를 공유하는 형태입니다. 이는 여전히 비용 효율성이 높고 관리하기 쉬운 방식이기 때문입니다.
* 캐싱 프록시 서버의 이점: 캐싱(Caching)을 통한 성능 개선의 이점은 여전히 유효합니다. 특히 기업이나 ISP(인터넷 서비스 제공업체) 내부망에서 다수의 사용자가 동일한 웹 콘텐츠에 접근할 때, 중앙 집중형 캐싱 프록시 서버는 네트워크 트래픽 감소와 응답 속도 향상에 크게 기여합니다.
* 현재의 양상: 다만, 익명성 및 보안의 중요성이 커지면서, 상업적인 목적으로는 **주거용 프록시(Residential Proxy)나 ISP 프록시** 등 더욱 신뢰도 높은 공유 프록시(IP 주소는 공유되지만, IP 자체의 품질이 좋음) 사용도 활발합니다.

#### 개인 프록시 (Private Proxies) 및 클라이언트 실행 프록시

* 개인 전용 프록시(Dedicated Private Proxies): `개인 전용 IP(Dedicated IP)`를 사용하는 프록시는 여전히 꾸준히 사용되며, 오히려 웹 스크래핑, SEO(검색 엔진 최적화), 마케팅 자동화 등 특정 비즈니스 목적으로는 더욱 중요해졌습니다. 이는 단독으로 IP를 사용함으로써 차단될 위험을 최소화하고 일관된 성능을 확보하기 위함입니다.
* 클라이언트 컴퓨터에서 직접 실행되는 프록시: 이 부분은 과거에 비해 형태가 다소 변화했습니다.
  * 브라우저 확장 프로그램 형태: 과거처럼 ISP 서비스가 작은 프록시를 사용자 PC에 직접 설치하는 경우는 줄어들었지만, 대신 **VPN 클라이언트나 브라우저 기반 프록시 확장 프로그램(예: FoxyProxy, SwitchyOmega 등) 형태로 사용자 기기에서 프록시 설정 및 기능을 관리하는 방식이 일반적**입니다.
  * 목적: 여전히 브라우징 기능 확장, 보안 강화, 지리적 제한 우회 등의 목적으로 사용됩니다. 특히 유료 VPN 서비스는 사용자의 기기에서 실행되는 전용 애플리케이션 형태를 취합니다.

> 결론적으로, 제시된 내용은 프록시 서버의 기본적인 구조와 사용 목적에 대한 설명으로, 현재(2025년)의 IT 환경에서도 그 기본 원리 및 장점은 그대로 유지되고 있습니다. 다만, 과거의 '무료 ISP 서비스 광고'를 위한 소규모 프록시 실행보다는, 보안(VPN), 상업적 데이터 수집, 익명성 강화 등의 목적으로 더 전문화된 유료/무료 프록시 서비스 및 클라이언트 앱 사용이 주류를 이루고 있습니다.

### 2) 프록시 대 게이트웨이

#### 프록시와 게이트웨이의 정의 및 차이점 (기본 개념)

<figure><img src="../../../../.gitbook/assets/image (399).png" alt=""><figcaption></figcaption></figure>

| **구분**      | **프록시 (Proxy)**                                               | **게이트웨이 (Gateway)**                                              |
| ----------- | ------------------------------------------------------------- | ---------------------------------------------------------------- |
| 엄밀한 정의      | <mark style="color:red;">같은 프로토콜</mark>을 사용하는 둘 이상의 애플리케이션 연결 | <mark style="color:red;">서로 다른 프로토콜</mark>을 사용하는 둘 이상의 애플리케이션 연결 |
| 주요 역할       | 중개자 (메시지 전달, 캐싱, 필터링 등)                                       | 프로토콜 변환기                                                         |
| 예시 (텍스트 기준) | (a) 클라이언트와 서버 양쪽 모두에게 HTTP로 말하는 중개 장치 (HTTP/HTTP 프록시)         | (b) HTTP로 요청을 받아 POP 이메일 트랜잭션으로 변환하는 중개 장치 (HTTP/POP 게이트웨이)      |

#### 핵심 요약

* 프록시: 클라이언트와 서버가 모두 HTTP를 사용하면, 중간에서 HTTP 요청을 받아 HTTP로 전달하는 중개자는 프록시입니다.
* 게이트웨이: 클라이언트가 HTTP로 요청을 보냈는데, <mark style="color:red;">서버가 POP와 같은 다른 프로토콜을 사용</mark>하면, 중간에서 프로토콜을 변환해주는 중개자는 게이트웨이입니다.

#### 실제 사용에서의 모호성과 통합 (현재 2025년 체크)

텍스트에서 언급했듯이, 실질적으로 프록시와 게이트웨이의 구분은 모호하며, 이 경향은 2025년에도 이어지거나 더욱 강화되었습니다.

&#x20;**프로토콜 변환의 필요성**

* HTTP 버전 문제: 브라우저와 서버가 다른 버전의 HTTP(예: HTTP/1.1과 HTTP/2 또는 HTTP/3)를 구현하기 때문에, 중개 장치는 버전 간의 호환성을 위해 **"약간의 프로토콜 변환"을 수행해야 합니다.**
* 2025년 현황: 현재는 `HTTP/3(QUIC)`의 사용이 증가하고 있어, 기존 HTTP/1.1 또는 HTTP/2만 지원하는 구형 시스템과의 통신을 위해 **프록시/게이트웨이에서 프로토콜 변환(하위 호환성 유지) 기능이 필수적입니다.**

**상용 시스템에서의 기능 통합**

* 다기능 중개 서버: 상용 프록시 서버(예: NGINX, Apache Traffic Server, Cloudflare 등)는 단순한 HTTP 전달자 역할뿐만 아니라, 다음과 같은 게이트웨이 기능을 광범위하게 구현합니다.
  * SSL/TLS 종료 및 재암호화: (프로토콜 보안 변환)
  * 방화벽 및 접근 제어: (보안 게이트웨이 역할)
  * SOCKS/FTP/웹소켓 지원: 서로 다른 계층이나 프로토콜로의 접근을 중개합니다.
  * API Gateway 역할의 부상: 특히 마이크로서비스 아키텍처(MSA) 환경에서 API Gateway는 외부의 HTTP 요청을 내부 시스템의 다양한 프로토콜(예: gRPC, 메시지 큐 등)로 변환하고 라우팅하는 핵심적인 "게이트웨이" 역할을 수행합니다.

**웹 기반 이메일의 지속 (예시의 유효성)**

* Yahoo! Mail, Hotmail (현재 Outlook)과 같은 웹 기반 이메일 프로그램은 여전히 HTTP(S) 요청을 받아 내부의 <mark style="color:red;">이메일 프로토콜(POP, IMAP, SMTP)로 변환하는 게이트웨이로 작동</mark>합니다.
* 2025년 현황: 이러한 웹 기반 서비스의 아키텍처는 더욱 복잡해졌지만, 근본적으로 사용자-웹 브라우저 간 HTTP(S) 통신과 내부 서버-데이터 저장소 간 비(非) HTTP 통신을 연결하는 프로토콜 변환 게이트웨이의 역할은 변함없이 핵심적입니다.

{% hint style="success" %}
결론적으로, 프록시와 게이트웨이의 개념적 구분은 유지되지만, 현대의 중개 서버는 대부분 두 가지 기능을 모두 수행하는 다목적 게이트웨이 프록시 형태로 진화했다고 볼 수 있습니다.
{% endhint %}

## 2. 왜 프록시를 사용하는가?

프록시 서버  단순히 트래픽을 중개하는 것을 넘어 부가적인 가치를 창출하는 **핵심적인 인터넷 인프라로서의 역할을 보여줍니다.** 이러한 프록시의 기능과 역할은 2025년 현재에도 여전히 유효하며, 기술의 발전과 함께 더욱 전문화되고 있습니다.

### 1) 프록시 서버의 주요 활용 분야 및 2025년 현황

프록시 서버는 HTTP 트래픽을 들여다보고 수정할 수 있는 능력을 바탕으로 보안 강화, 성능 향상, 비용 절감 등 실용적인 목표를 달성합니다.

#### 보안 및 접근 제어 기능

| 어린이 필터 (필터링 프록시) | 악성 콘텐츠(성인, 부적절) 접근을 차단하고 교육 콘텐츠만 허용                        | 학교 및 기업에서 URL 필터링, 콘텐츠 카테고리 분류, 시간 기반 접근 제한 기능을 통해 필수적인 보안 및 정책 준수 도구로 사용됨.                                                                                    | <div><figure><img src="../../../../.gitbook/assets/image (400).png" alt=""><figcaption></figcaption></figure></div> |
| ---------------- | ---------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------- |
| 문서 접근 제어자        | 많은 웹 서버에 대한 단일 접근 제어 전략 구현 및 감사 추적(Audit Trail) 제공.        | 중앙 집중형 인증 및 인가(Authentication & Authorization) 시스템과 통합되어 SSO(Single Sign-On) 및 RBAC(Role-Based Access Control)를 구현하는 핵심 요소로 작용함.                               | <div><figure><img src="../../../../.gitbook/assets/image (401).png" alt=""><figcaption></figcaption></figure></div> |
| 보안 방화벽           | 조직의 인/아웃바운드 응용 레벨 프로토콜 흐름을 통제하고, 바이러스 제거를 위한 트래픽 검사 후크 제공. | 차세대 방화벽(Next-Generation Firewall, NGFW) 및 `웹 애플리케이션 방화벽(WAF)`에 통합되어, 단순히 포트를 막는 것을 넘어 애플리케이션 계층(L7)의 트래픽을 심층 검사(Deep Packet Inspection)하여 제로데이 공격 및 바이러스를 방지함. | <div><figure><img src="../../../../.gitbook/assets/image (403).png" alt=""><figcaption></figcaption></figure></div> |

#### 성능 및 효율성 기능

| **프록시 유형**       | **역할 (텍스트 기반)**                                      | **2025년 현황 및 전문화**                                                                                                            |  이미지                                                                                                                |
| ---------------- | ---------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------- |
| 웹 캐시 (캐싱 프록시)    | 인기 문서의 로컬 사본을 관리하여 요청이 오면 빠르게 제공, 느리고 비싼 인터넷 통신을 줄임. | `CDN(Contents Delivery Network)`의 핵심 요소. 대규모 글로벌 캐시 네트워크로 진화하여 사용자에게 지연 시간이 가장 짧은 캐시 서버에서 콘텐츠를 제공, 인터넷 성능과 비용 절감에 가장 큰 기여를 함. | <div><figure><img src="../../../../.gitbook/assets/image (404).png" alt=""><figcaption></figcaption></figure></div> |
| 대리 프록시 (리버스 프록시) | 웹 서버인 것처럼 위장하여 진짜 서버 요청을 받고 다른 서버와 통신함 (서버 가속기).     | 웹 서버 앞에 배치되어 로드 밸런싱, SSL 오프로드, DDoS 방어를 수행하는 L7 로드 밸런서 역할을 수행. 서버의 부하를 덜어주는 필수적인 아키텍처 요소임.                                    | <div><figure><img src="../../../../.gitbook/assets/image (405).png" alt=""><figcaption></figcaption></figure></div> |
| 콘텐츠 라우터          | 트래픽 조건, 콘텐츠 종류에 따라 요청을 특정 웹 서버나 복제 캐시로 유도.           | `트래픽 관리 시스템(Traffic Management System)`으로 불리며, 사용자의 지리적 위치(Geo-location), 네트워크 상태, 서비스 가입 여부 등에 따라 가장 적절한 서버로 요청을 동적으로 라우팅함.  | <div><figure><img src="../../../../.gitbook/assets/image (406).png" alt=""><figcaption></figcaption></figure></div> |



#### 부가 가치 서비스 기능

| **프록시 유형**           | **역할 (텍스트 기반)**                                                                             | **2025년 현황 및 전문화**                                                                                                                                  | 이미지                                                                                                                 |
| -------------------- | ------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------- |
| 트랜스코더                | 콘텐츠를 클라이언트에게 전달하기 전에 **본문 포맷을 수정** (예: GIF -> JPG 변환, 한국어 -> 스페인어 번역, HTML -> 모바일 텍스트 최적화). | 주로 모바일 환경 최적화(이미지 및 스크립트 압축), 다국어 자동 번역 서비스, 미디어 스트리밍 서비스에서 다양한 기기(스마트 TV, 모바일)의 대역폭 및 해상도에 맞춰 실시간으로 비디오 포맷을 변환(트랜스코딩)하는 데 필수적으로 사용됨.               | <div><figure><img src="../../../../.gitbook/assets/image (408).png" alt=""><figcaption></figcaption></figure></div> |
| 익명화 프록시 (Anonymizer) | HTTP 메시지에서 신원을 식별할 수 있는 특성(IP, 쿠키, Referer 등)을 제거하여 개인 정보 보호와 익명성 보장에 기여.                   | VPN, Tor 네트워크의 일부로 기능하여 최고 수준의 익명성을 제공하거나, 웹 스크래핑 시 IP 추적을 피하기 위한 상용 프록시 서비스의 기본 기능으로 포함되어 있음. **개인정보 보호법(GDPR 등)**&#xC758; 중요성이 커지면서 그 역할이 더욱 강조됨. | <div><figure><img src="../../../../.gitbook/assets/image (409).png" alt=""><figcaption></figcaption></figure></div> |

***

#### 결론: 2025년의 프록시 서버

현재 프록시 서버는 개별적인 기능(캐시, 방화벽, 변환 등)으로 존재하기보다는, <mark style="color:red;">'API 게이트웨이', 'WAF', 'CDN 에지 서버', 'L7 로드 밸런서' 등 고도화된 시스템 속에 필수적인 모듈로 통합되어 운영</mark>됩니다. 프록시가 트래픽을 제어하고 수정하는 능력은 현대 인터넷 서비스의 성능, 보안, 확장성, 그리고 규정 준수(Compliance)를 보장하는 핵심 기술로 자리 잡았습니다.

## 3. 프록시는 어디에 있는가?

<figure><img src="../../../../.gitbook/assets/image (410).png" alt=""><figcaption></figcaption></figure>

### 1) 프록시 서버 배치 위치 (Proxy Server Deployment)

프록시 서버는 목적에 따라 네트워크의 여러 주요 지점에 배치될 수 있습니다.

#### 1. 출구(Egress) 프록시&#x20;

<figure><img src="../../../../.gitbook/assets/image (414).png" alt=""><figcaption></figcaption></figure>

* 위치: 로컬 네트워크(회사 LAN, 학교망)의 출구 지점, 즉 내부와 외부 인터넷 사이.
* 목적: 내부에서 외부로 나가는 트래픽을 통제하여 보안 방화벽 역&#xD560;**, 인터넷 요금 절약 및 성능 개선** (캐싱), 필터링 (부적절한 콘텐츠 차단) 수행.
* 2025년 현황: 기업 환경에서 포워드 프록시(Forward Proxy) 또는 **보안 웹 게이트웨이(Secure Web Gateway, SWG)**&#xB85C; 불리며, <mark style="color:red;">재택근무(Remote Work) 환경에서는 클라우드 기반 SWG 형태로 진화</mark>했습니다.

#### 2. 접근(입구) 프록시

<figure><img src="../../../../.gitbook/assets/image (415).png" alt=""><figcaption></figcaption></figure>

* 위치: ISP(인터넷 서비스 제공업체) 접근 지점.
* 목적: 모든 고객 요청을 종합적으로 처리하여 다운로드 속도 개선 및 인터넷 대역폭 비용 절감 (캐시 프록시 사용).
* 2025년 현황: ISP 레벨의 대규모 캐시 프록시 역할은 대부분 `CDN(Contents Delivery Network) 사업자`가 대체하고 있습니다. <mark style="color:red;">ISP는 트래픽 관리 및 감시 목적으로 프록시 기능을 활용하는 경우가 많습니다.</mark>

#### 3. 대리 프록시 (Surrogate/Reverse Proxy)&#x20;

<figure><img src="../../../../.gitbook/assets/image (416).png" alt=""><figcaption></figcaption></figure>

* 위치: 네트워크 끝단에 있는 웹 서버들의 바로 앞.
* 목적: 웹 서버로 향하는 모든 요청을 처리하여 보안 기능 추가, 느린 웹 서버의 성능 개선 (서버 가속기), 웹 서버를 가장하여 요청을 받음.
* 2025년 현황: **리버스 프록시는 현대 웹 아키텍처의 핵심 요소**로, 웹 서버 대신 `로드 밸런싱(Load Balancing)`, SSL/TLS 처리, 웹 방화벽(WAF) 기능을 수행합니다.

#### 4. 네트워크 교환 프록시&#x20;

<figure><img src="../../../../.gitbook/assets/image (417).png" alt=""><figcaption></figcaption></figure>

* 위치: 인터넷 피어링 교환 지점 (네트워크 교차로).
* 목적: **캐시를 이용해 인터넷 혼잡 완화 및 트래픽 흐름 감시.**
* 2025년 현황: 대규모 IX(Internet Exchange) 지점에서 트래픽 감시나 라우팅 최적화를 위해 사용될 수 있으나, 상업적 캐싱 기능은 `CDN`에 집중되어 있습니다. 일부 국가에서는 정부 차원의 트래픽 감시 목적으로도 논란 속에 배치될 수 있습니다.

***

### 2) 프록시 계층 (Proxy Hierarchies)

프록시들은 연쇄적으로 연결되어 프록시 계층을 구성할 수 있습니다.

<figure><img src="../../../../.gitbook/assets/image (418).png" alt=""><figcaption></figcaption></figure>

* 구조: 메시지는 최종 원 서버에 도착할 때까지 <mark style="color:orange;">여러 프록시(프록시 1 -> 프록시 2 -> 프록시 3 -> 원 서버)를 거쳐 이동합니다.</mark>
* 부모/자식 관계: 서버에 더 가까운 프록시는 부모, 클라이언트에 더 가까운 프록시는 자식이라고 부릅니다. (예: 프록시 3은 프록시 2의 부모)

#### 동적 부모 선택 (Dynamic Parent Selection)

<figure><img src="../../../../.gitbook/assets/image (419).png" alt=""><figcaption></figcaption></figure>

{% hint style="success" %}
프록시 계층은 반드시 정적일 필요는 없으며, 다음과 같은 판단 근거에 따라 다음 프록시(부모)를 동적으로 선택할 수 있습니다.
{% endhint %}

* **부하 균형:** 현재 부모 프록시의 작업량 수준에 따라 메시지를 분산.
* **지리적 인접성:** 원 서버의 지역을 담당하는 지리적으로 가까운 부모를 선택하여 지연 시간 단축.
* **프로토콜/타입 라우팅: 요**청된 URI 종류에 따라 특화된 프록시(예: 압축 프록시, 캐시 서버)로 라우팅.
* **유료 서비스 라우팅:** 추가금을 지불한 사용자/콘텐츠를 위한 고성능 캐시 또는 압축 엔진으로 요청을 유도.
* 2025년 현황: 이는 **지능형 콘텐츠 라우팅(Intelligent Content Routing)**&#xC758; 핵심이며, 복잡한 CDN 및 클라우드 서비스에서 `엣지 컴퓨팅(Edge Computing)`과 결합하여 **실시간으로 최적의 경로를 결정하는 데 사용됩니다.**



### 3) 트래픽이 프록시를 찾아가는 방법

클라이언트 트래픽을 의도적으로 프록시 서버로 보내는 방법은 주로 네 가지가 있습니다.

#### 1. 클라이언트를 수정 (명시적 프록시 설정)

<figure><img src="../../../../.gitbook/assets/image (421).png" alt=""><figcaption></figcaption></figure>

* 방법: 웹 브라우저나 운영 체제에 수동 또는 자동으로 프록시 서버 주소를 설정합니다.
* 특징: 클라이언트가 의도적으로 프록시를 사용함을 알고 있으며, 요청을 원 서버가 아닌 프록시로 보냅니다.

#### 2. 네트워크를 수정 (인터셉트 프록시)

<figure><img src="../../../../.gitbook/assets/image (422).png" alt=""><figcaption></figcaption></figure>

* 방법: 클라이언트와 무관하게, 네트워크상의 스위칭 장치나 **라우팅 장치가 HTTP 트래픽을 가로채어 클라이언트 모르게 프록시로 리다이렉트**합니다.
* 용어: 이를 흔히 `투명 프록시(Transparent Proxy)`라고도 불렀지만, 표준 커뮤니티에서는 인터셉트(Interception) 프록시라는 용어를 권장합니다.

#### 3. DNS 이름공간을 수정 (대리 프록시)

<figure><img src="../../../../.gitbook/assets/image (423).png" alt=""><figcaption></figcaption></figure>

* 방법: 대리 프록시(리버스 프록시)가 웹 서버의 IP 주소와 이름을 대신 사용합니다. 클라이언트의 요청은 DNS 조회를 통해 자연스럽게 프록시로 향하게 됩니다.

#### 4. 웹 서버를 수정

<figure><img src="../../../../.gitbook/assets/image (424).png" alt=""><figcaption></figcaption></figure>

* 방법: 웹 서버가 HTTP `리다이렉션 명령(응답 코드 305)`을 클라이언트에게 돌려주어, 클라이언트가 다음 요청을 프록시로 보내도록 유도합니다.

#### 5. 2025에 가장 많이 쓰는 방법

{% hint style="success" %}
제시된 네 가지 방법 중, 2025년 현재 가장 흔하게 사용되는 방식은 **2번 네트워크를 수정 (인터셉트 프록시)과 3번 DNS 이름공간을 수정 (대리 프록시)**&#xC785;니다.
{% endhint %}

이 두 방식은 사용 목적과 배치 위치가 다르지만, **현대의 대규모 인터넷 서비스와 기업 네트워크 환경에서 클라이언트의 개입 없이 트래픽 흐름을 통제하고 최적화하는 데 필수적**입니다.

**가장 많이 사용되는 방식 (2025년 기준)**

| **순위** | **방식**                           | **주요 사용 환경**              | **사용 목적**                           |
| ------ | -------------------------------- | ------------------------- | ----------------------------------- |
| 1위     | 3. DNS 이름공간을 수정 (대리 프록시/리버스 프록시) | 모든 웹 서비스, 클라우드, 대규모 웹사이트  | 로드 밸런싱, 보안(WAF), 캐싱, 성능 향상.         |
| 2위     | 2. 네트워크를 수정 (인터셉트 프록시/투명 프록시)    | 기업/학교 네트워크, ISP 환경        | 내부 트래픽 감시, 보안 필터링, 콘텐츠 차단, 캐싱.      |
| 3위     | 1. 클라이언트를 수정 (명시적 프록시 설정)        | 개인 VPN/프록시 사용, 특정 재택근무 환경 | 개인 익명성/보안, 기업 내부망 접속, 특정 지리적 제한 우회. |
| 4위     | 4. 웹 서버를 수정 (HTTP 리다이렉션)         | 특수한 트래픽 분산, 마이그레이션 단계     | 일시적인 트래픽 이동 및 부하 분산.                |

**주요 방식별 사용 현황 상세**

🥇 3. DNS 이름공간을 수정 (대리 프록시 / 리버스 프록시)

이 방식은 웹 서버 앞에 배치되는 `리버스 프록시(Reverse Proxy)` 또는 `서버 가속기 형태`로 현대 인터넷의 표준 아키텍처입니다. 클라이언트가 웹사이트 주소(도메인 이름)로 요청을 보내면, DNS가 프록시 서버의 IP를 반환하기 때문에 클라이언트는 자신이 프록시와 통신하는지 인지하지 못합니다.

* 현재의 중요성:
  * CDN (Contents Delivery Network): 전 세계적으로 콘텐츠를 빠르게 전달하는 모든 CDN은 이 방식으로 동작합니다.
  * **로드 밸런싱 (Load Balancing):** 트래픽을 분산하여 서버 과부하를 막는 핵심 기술입니다.
  * 클라우드 컴퓨팅: AWS, Azure, Google Cloud 등의 모든 서비스 게이트웨이는 리버스 프록시 기능을 수행합니다.

**🥈 2. 네트워크를 수정 (인터셉트 프록시 / 투명 프록시)**

이 방식은 **클라이언트 측에서 아무런 설정을 할 필요가 없기 때문에 네트워크 관리자가 중앙에서 트래픽을 통제하는 데 매우 효율적**입니다.

* 현재의 중요성:
  * 기업/학교 보안: 내부 사용자의 웹 사용을 감시하&#xACE0;**, 악성 코드가 포함된 사이트를 차단**하며, 데이터 유출을 방지하기 위해 필수적으로 사용됩니다.
  * ISP (인터넷 서비스 제공업체): 특정 지역이나 **전체 망의 트래픽을 감시**하거나 캐싱을 위해 사용되기도 합니다.

**🥉 1. 클라이언트를 수정 (명시적 프록시 설정)**

이 방식은 과거 PC 통신 시대부터 사용되었지만, **현재는 주로 개인 사용자나 특정 목적을 위해 사용**됩니다.

* 현재의 중요성:
  * 개인 VPN/프록시 앱: 사용자가 스스로 보안이나 익명성을 위해 앱을 설치하고 프록시를 사용하는 경우입니다.
  * 회사 내부망 접근: 재택근무 환경에서 회사 내부의 특정 서버에 접속하기 위해 수동으로 프록시 설정을 지정하는 경우가 있습니다.

**4. 웹 서버를 수정 (HTTP 리다이렉션)**

이 방식은 일시적으로 사용될 때 유용합니다.

* 현재의 중요성: 웹사이트 주소가 영구적으로 바뀌었거나(301), 현재 서버가 아닌 다른 서버로 트래픽을 옮겨야 할 때 주로 사용됩니다. 프록시로 유도하는 용도로는 다른 방식에 비해 상대적으로 덜 사용됩니다.

## 4. 클라이언트 프록시 설정



## 그 외

### 1) VPN과 프록시 서버의 차이

{% hint style="danger" %}
두 가지 모두 사용자의 개인 정보 보호와 온라인 안전성을 향상시키는 도구이지만, 세부적인 차이가 있습니다.
{% endhint %}

**프록시 서버 (Proxy Server)**

* 역할: 클라이언트와 인터넷 사이에서 중개 역할을 합니다. 사용자의 요청을 서버에 전달하고, 서버에서 응답을 받아 사용자에게 반환합니다.
* 용도: 주로 IP 주소를 숨기거나 웹 필터링에 사용됩니다.
* 보안: 일반적으로 데이터 암호화를 제공하지 않습니다.
* 전체 시스템 트래픽 보호 범위: 특정 서비스 또는 웹사이트에 대한 트래픽만 전달합니다. (애플리케이션 수준)
* 설정 및 구성: 일반적으로 브라우저 또는 애플리케이션 설정을 통해 구성하고 사용합니다.
* 가격: 무료 또는 유료로 제공될 수 있습니다.



**VPN (Virtual Private Network)**

* 역할: 사용자의 인터넷 연결을 암호화하여 외부의 감시나 감청을 방지합니다.
* 용도: 보안 및 개인 정보 보호를 위해 사용됩니다.
* 보안: 데이터를 암호화하여 보안을 제공합니다.
* 전체 시스템 트래픽 보호 범위: 모든 인터넷 트래픽을 보호합니다. (운영 체제 수준)
* 설정 및 구성: 전용 VPN 애플리케이션을 통해 설치하고 사용하는 것이 일반적입니다.
* 가격: 무료 및 유료 옵션이 있지만 유료 서비스가 일반적으로 더 신뢰할 수 있습니다.

{% hint style="success" %}
가장 큰 차이점은 데이터 암호화와 보호 범위입니다.

* VPN은 모든 인터넷 트래픽을 암호화하여 높은 수준의 보안 및 개인 정보 보호를 제공합니다.
* 프록시 서버는 주로 IP 주소를 숨기는 데 사용되며, 일반적으로 트래픽을 암호화하지 않고 특정 애플리케이션이나 브라우저의 트래픽만 처리합니다.
{% endhint %}

### 2) 카페 와이파이의 문제

Q. 와이파이에도 보면 프록시가 있다.  그래서 카페 와이파이에 이용에iptime 같은 와이파이를 이용하는데 어떤 사람이 프록시를 활용하면 정보 탈취가 가능하다 했습니다. 내가 아는 정보가 맞을까?

카페 와이파이(공용 Wi-Fi) 환경에서 **프록시 설정이 악용될 경우 정보 탈취 위험이 있습니다.** 이는 매우 심각한 보안 위협 중 하나입니다.

> 와이파이 설정에 '프록시' 항목이 있는 것은 정상이며, 이는 사용자가 특정 프록시 서버를 통해 인터넷에 접속하도록 수동으로 설정하는 기능입니다. 문제는 이 기능이 악의적으로 이용될 때 발생합니다.

#### 1. 프록시 설정을 통한 정보 탈취의 원리

프록시 서버는 사용자와 인터넷 사이에서 중개자 역할을 합니다. 만약 공격자가 사용자의 기기에 악의적인 프록시 서버 주소를 설정하게 만들면, 사용자의 모든 인터넷 트래픽이 공격자의 서버를 거치게 됩니다.

| **항목**                            | **프록시가 악용될 때의 위험성**                                                     |
| --------------------------------- | ----------------------------------------------------------------------- |
| 탈취 범위                             | 암호화되지 않은 모든 정보 (예: 방문한 웹사이트, 일반적인 로그인 정보, 검색 내용 등)를 공격자가 중간에서 볼 수 있습니다. |
| 중간자 공격 (Man-in-the-Middle Attack) | 공격자가 사용자의 트래픽을 가로채고, 심지어는 웹사이트 내용을 위·변조하여 피싱 사이트로 유도할 수도 있습니다.          |
| 악성 코드 감염                          | 공격자가 프록시를 통해 악성 코드를 사용자 기기에 주입하려 시도할 수 있습니다.                            |

#### 2. 카페/공용 와이파이에서 특히 위험한 이유

공용 Wi-Fi는 보통 암호화 수준이 낮거나, 같은 네트워크에 연결된 모든 사용자에게 보안상 취약점을 노출합니다.

* 쉬운 접근성: 해커는 카페, 공항 등 공공장소에서 **실제 와이파이와 비슷한 이름의 가짜 와이파이 핫스팟을 만들거나, 공유기 자체를 해킹할 수 있습니다.**
* 설정 변경 유도: 해킹된 공유기나 가짜 핫스팟을 통해 접속한 사용자에게 자동으로 악성 프록시 설정을 삽입하거나, 프록시 설정을 요구하는 메시지를 띄워 사용자 스스로 악성 프록시 서버를 입력하도록 유도할 수 있습니다.

#### 3. 안전하게 공용 와이파이를 사용하는 방법

공용 와이파이 환경에서는 프록시 악용 외에도 다양한 해킹 위험이 상존하므로, 다음의 보안 수칙을 반드시 지켜야 합니다.

**🛡️ 필수 보안 조치**

1. VPN 사용 (가장 중요): 공용 와이파이에 연결할 때는 **신뢰할 수 있는 VPN(Virtual Private Network)**&#xC744; 항상 켜두세요. VPN은 사용자의 모든 트래픽을 강력하게 암호화된 터널로 전송하므로, 해커가 중간에서 정보를 가로채도 암호를 풀기 어렵습니다.
2. 민감한 정보 입력 자제: 공용 와이파이를 사용하는 동안에는 온라인 뱅킹, 주식 거래, 중요한 이메일 확인, 비밀번호가 포함된 사이트 로그인 등 민감한 활동을 피하는 것이 가장 안전합니다.
3. 파일 공유 기능 비활성화: 사용 중인 기기의 **네트워크 파일 공유 기능(File Sharing)**&#xC744; 끄세요. 이 기능이 켜져 있으면 같은 와이파이를 쓰는 다른 사용자(해커 포함)가 내 기기에 접근하기 쉬워집니다.
4. HTTPS 확인: 웹사이트에 접속할 때 주소창에 **'HTTPS'**&#xAC00; 표시되는지 확인하세요. 'S'는 보안(Secure)을 의미하며, 해당 사이트와의 통신이 암호화된다는 뜻입니다.
5. Wi-Fi 자동 연결 기능 해제: 공공장소의 와이파이에 자동으로 연결되는 기능을 꺼두세요. 이는 해커가 만든 가짜 핫스팟에 무심코 연결되는 것을 방지합니다.



**Q. 어떻게 조정하는 것일까?**

프록시 서버를 조정해서 악용하는 방법은 주로 두 가지 시나리오로 이루어집니다. 하나는 사용자의 프록시 설정을 강제로 변경하는 것이고, 다른 하나는 사용자가 접속하는 네트워크 자체를 조작하여 공격자의 서버를 프록시처럼 경유하게 만드는 것입니다.

> 공격자가 프록시를 악용하는 주요 방법 (정보 탈취 시나리오)

**1. 장치 설정 조작 (프록시 설정 강제 변경)**

공격자가 사용자의 기기(스마트폰, 노트북 등)에 접근하여 인터넷 연결 설정을 직접 변경하는 방식입니다.

* 악성 파일/앱 설치 유도: 사용자가 악성 코드가 포함된 앱이나 파일을 다운로드하게 유도합니다. 이 악성 코드는 장치에 몰래 설치되어, Wi-Fi 또는 시스템의 인터넷 설정에 있는 프록시 서버 주소를 공격자가 운영하는 서버의 주소로 바꿔버립니다.
* 팝업/알림 이용: 일부 정교한 해킹 기법은 사용자가 웹사이트를 방문했을 때 "**보안 강화를 위해 프록시 설정을 변경하십시오."**&#xC640; 같은 가짜 팝업이나 시스템 알림을 띄워, 사용자가 직접 공격자의 프록시 서버 주소를 입력하도록 속이기도 합니다.

→ 결과: 사용자가 인터넷에 접속할 때마다 모든 데이터가 **(사용자) → (공격자의 프록시 서버) → (실제 웹사이트) 순서로 흘러가게 되며, 공격자는 이 데이터를 복사하거나 읽을 수 있게 됩니다.**

***

**2. 네트워크 조작 (가짜 Wi-Fi/공유기 해킹)**

공공장소(카페, 공항 등)의 Wi-Fi 네트워크 자체를 조작하여 모든 사용자의 트래픽이 자신을 거치도록 만듭니다.

* 가짜 핫스팟 생성 (Evil Twin Attack):
  * 공격자는 실제 카페 와이파이 이름과 똑같은 이름(SSID)의 가짜 와이파이 핫스팟을 만듭니다.
  * 사용자가 이 가짜 핫스팟에 연결하면, 공격자의 장치가 중간에서 라우터(공유기)와 프록시 서버의 역할을 동시에 수행하며 사용자의 트래픽을 가로챕니다.
* 공유기 설정 해킹:
  * 공격자가 취약한 iptime 등의 공용 공유기 관리자 페이지에 무단으로 접속합니다.
  * 접속 후 공유기 자체의 DNS 설정이나 라우팅 테이블을 조작하여, 해당 공유기에 연결된 모든 사용자의 트래픽이 공격자의 프록시 서버를 거치도록 만듭니다.

→ 결과: 사용자의 장치 설정은 건드리지 않아도, 와이파이 네트워크를 통과하는 순간 이미 공격자의 통제 하에 들어가게 됩니다.

**🛡️ 핵심 방어 방법: VPN 사용**

프록시를 이용한 대부분의 정보 탈취 공격은 데이터가 암호화되지 않은 상태에서 이루어질 때 성공합니다.

* VPN을 사용하면 사용자의 장치와 VPN 서버 사이에 강력하게 암호화된 터널이 생성됩니다.
* 공격자가 중간에 프록시 서버를 설정하여 트래픽을 가로채더라도, 그 내용은 암호화된 상태이기 때문에 해커는 내용을 해독할 수 없어 사실상 정보 탈취가 불가능해집니다.

### 3) 프록시 패턴

<figure><img src="../../../../.gitbook/assets/image (411).png" alt=""><figcaption></figcaption></figure>

### 4) 프록시와 AOP 스프링

<figure><img src="../../../../.gitbook/assets/image (412).png" alt="http://junstudy.tistory.com/33"><figcaption><p><a href="http://junstudy.tistory.com/33">http://junstudy.tistory.com/33</a></p></figcaption></figure>


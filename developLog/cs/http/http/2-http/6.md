# 6장 프록시

웹 프록시 서버는 중개자다. 프록시는 클라이언트와 서버 사이에 위치하여, 그들 사이의 HTTP 메시지를 정리하는 중개인처 럼동작한다.

## 1. 웹 중개자

### 0) 프롤로그

웹 프록시 서버는 클라이언트의 입장에서 트랜잭션을 수행하는 중개인입니다. 프록시가 없다면, 클라이언트는 HTTP 서버와 직접 이야기합니다.

> 트랜잭션 완료하는 것이 클라이언트라는 점은 변하지 않지만, 프록시 서버가 제공하는 좋은 서비스를 이용하게 됩니다.

H TTP 프록시 서버는 웹 서버이기도 하고 웹 클라이언트기도 합니다.&#x20;

<figure><img src="../../../../.gitbook/assets/image (396).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../../../.gitbook/assets/image (398).png" alt=""><figcaption></figcaption></figure>



### 1) 개인 프록시와 공유 프록시

프록시 서버는 하나의 클라이언트가 독점적으로 사용할 수 있고, 여러 클라이언트가 공유할 수도 있습니다.&#x20;

#### &#x20;공용 프록시 (Shared Proxies) 및 중앙 집중형 관리

* 대부분 공용/공유 프록시: 여전히 많은 프록시 서비스, 특히 무료 프록시나 저가형 데이터센터 프록시는 공유(Shared) 방식으로 운영됩니다. 다수의 사용자가 하나의 IP 주소를 공유하는 형태입니다. 이는 여전히 비용 효율성이 높고 관리하기 쉬운 방식이기 때문입니다.
* 캐싱 프록시 서버의 이점: 캐싱(Caching)을 통한 성능 개선의 이점은 여전히 유효합니다. 특히 기업이나 ISP(인터넷 서비스 제공업체) 내부망에서 다수의 사용자가 동일한 웹 콘텐츠에 접근할 때, 중앙 집중형 캐싱 프록시 서버는 네트워크 트래픽 감소와 응답 속도 향상에 크게 기여합니다.
* 현재의 양상: 다만, 익명성 및 보안의 중요성이 커지면서, 상업적인 목적으로는 **주거용 프록시(Residential Proxy)나 ISP 프록시** 등 더욱 신뢰도 높은 공유 프록시(IP 주소는 공유되지만, IP 자체의 품질이 좋음) 사용도 활발합니다.

#### 개인 프록시 (Private Proxies) 및 클라이언트 실행 프록시

* 개인 전용 프록시(Dedicated Private Proxies): `개인 전용 IP(Dedicated IP)`를 사용하는 프록시는 여전히 꾸준히 사용되며, 오히려 웹 스크래핑, SEO(검색 엔진 최적화), 마케팅 자동화 등 특정 비즈니스 목적으로는 더욱 중요해졌습니다. 이는 단독으로 IP를 사용함으로써 차단될 위험을 최소화하고 일관된 성능을 확보하기 위함입니다.
* 클라이언트 컴퓨터에서 직접 실행되는 프록시: 이 부분은 과거에 비해 형태가 다소 변화했습니다.
  * 브라우저 확장 프로그램 형태: 과거처럼 ISP 서비스가 작은 프록시를 사용자 PC에 직접 설치하는 경우는 줄어들었지만, 대신 **VPN 클라이언트나 브라우저 기반 프록시 확장 프로그램(예: FoxyProxy, SwitchyOmega 등) 형태로 사용자 기기에서 프록시 설정 및 기능을 관리하는 방식이 일반적**입니다.
  * 목적: 여전히 브라우징 기능 확장, 보안 강화, 지리적 제한 우회 등의 목적으로 사용됩니다. 특히 유료 VPN 서비스는 사용자의 기기에서 실행되는 전용 애플리케이션 형태를 취합니다.

> 결론적으로, 제시된 내용은 프록시 서버의 기본적인 구조와 사용 목적에 대한 설명으로, 현재(2025년)의 IT 환경에서도 그 기본 원리 및 장점은 그대로 유지되고 있습니다. 다만, 과거의 '무료 ISP 서비스 광고'를 위한 소규모 프록시 실행보다는, 보안(VPN), 상업적 데이터 수집, 익명성 강화 등의 목적으로 더 전문화된 유료/무료 프록시 서비스 및 클라이언트 앱 사용이 주류를 이루고 있습니다.





## 그 외

### 1) VPN과 프록시 서버의 차이

{% hint style="danger" %}
두 가지 모두 사용자의 개인 정보 보호와 온라인 안전성을 향상시키는 도구이지만, 세부적인 차이가 있습니다.
{% endhint %}

**프록시 서버 (Proxy Server)**

* 역할: 클라이언트와 인터넷 사이에서 중개 역할을 합니다. 사용자의 요청을 서버에 전달하고, 서버에서 응답을 받아 사용자에게 반환합니다.
* 용도: 주로 IP 주소를 숨기거나 웹 필터링에 사용됩니다.
* 보안: 일반적으로 데이터 암호화를 제공하지 않습니다.
* 전체 시스템 트래픽 보호 범위: 특정 서비스 또는 웹사이트에 대한 트래픽만 전달합니다. (애플리케이션 수준)
* 설정 및 구성: 일반적으로 브라우저 또는 애플리케이션 설정을 통해 구성하고 사용합니다.
* 가격: 무료 또는 유료로 제공될 수 있습니다.



**VPN (Virtual Private Network)**

* 역할: 사용자의 인터넷 연결을 암호화하여 외부의 감시나 감청을 방지합니다.
* 용도: 보안 및 개인 정보 보호를 위해 사용됩니다.
* 보안: 데이터를 암호화하여 보안을 제공합니다.
* 전체 시스템 트래픽 보호 범위: 모든 인터넷 트래픽을 보호합니다. (운영 체제 수준)
* 설정 및 구성: 전용 VPN 애플리케이션을 통해 설치하고 사용하는 것이 일반적입니다.
* 가격: 무료 및 유료 옵션이 있지만 유료 서비스가 일반적으로 더 신뢰할 수 있습니다.

{% hint style="success" %}
가장 큰 차이점은 데이터 암호화와 보호 범위입니다.

* VPN은 모든 인터넷 트래픽을 암호화하여 높은 수준의 보안 및 개인 정보 보호를 제공합니다.
* 프록시 서버는 주로 IP 주소를 숨기는 데 사용되며, 일반적으로 트래픽을 암호화하지 않고 특정 애플리케이션이나 브라우저의 트래픽만 처리합니다.
{% endhint %}

### 2) 카페 와이파이의 문제

Q. 와이파이에도 보면 프록시가 있다.  그래서 카페 와이파이에 이용에iptime 같은 와이파이를 이용하는데 어떤 사람이 프록시를 활용하면 정보 탈취가 가능하다 했습니다. 내가 아는 정보가 맞을까?

카페 와이파이(공용 Wi-Fi) 환경에서 **프록시 설정이 악용될 경우 정보 탈취 위험이 있습니다.** 이는 매우 심각한 보안 위협 중 하나입니다.

> 와이파이 설정에 '프록시' 항목이 있는 것은 정상이며, 이는 사용자가 특정 프록시 서버를 통해 인터넷에 접속하도록 수동으로 설정하는 기능입니다. 문제는 이 기능이 악의적으로 이용될 때 발생합니다.

#### 1. 프록시 설정을 통한 정보 탈취의 원리

프록시 서버는 사용자와 인터넷 사이에서 중개자 역할을 합니다. 만약 공격자가 사용자의 기기에 악의적인 프록시 서버 주소를 설정하게 만들면, 사용자의 모든 인터넷 트래픽이 공격자의 서버를 거치게 됩니다.

| **항목**                            | **프록시가 악용될 때의 위험성**                                                     |
| --------------------------------- | ----------------------------------------------------------------------- |
| 탈취 범위                             | 암호화되지 않은 모든 정보 (예: 방문한 웹사이트, 일반적인 로그인 정보, 검색 내용 등)를 공격자가 중간에서 볼 수 있습니다. |
| 중간자 공격 (Man-in-the-Middle Attack) | 공격자가 사용자의 트래픽을 가로채고, 심지어는 웹사이트 내용을 위·변조하여 피싱 사이트로 유도할 수도 있습니다.          |
| 악성 코드 감염                          | 공격자가 프록시를 통해 악성 코드를 사용자 기기에 주입하려 시도할 수 있습니다.                            |

#### 2. 카페/공용 와이파이에서 특히 위험한 이유

공용 Wi-Fi는 보통 암호화 수준이 낮거나, 같은 네트워크에 연결된 모든 사용자에게 보안상 취약점을 노출합니다.

* 쉬운 접근성: 해커는 카페, 공항 등 공공장소에서 **실제 와이파이와 비슷한 이름의 가짜 와이파이 핫스팟을 만들거나, 공유기 자체를 해킹할 수 있습니다.**
* 설정 변경 유도: 해킹된 공유기나 가짜 핫스팟을 통해 접속한 사용자에게 자동으로 악성 프록시 설정을 삽입하거나, 프록시 설정을 요구하는 메시지를 띄워 사용자 스스로 악성 프록시 서버를 입력하도록 유도할 수 있습니다.

#### 3. 안전하게 공용 와이파이를 사용하는 방법

공용 와이파이 환경에서는 프록시 악용 외에도 다양한 해킹 위험이 상존하므로, 다음의 보안 수칙을 반드시 지켜야 합니다.

**🛡️ 필수 보안 조치**

1. VPN 사용 (가장 중요): 공용 와이파이에 연결할 때는 **신뢰할 수 있는 VPN(Virtual Private Network)**&#xC744; 항상 켜두세요. VPN은 사용자의 모든 트래픽을 강력하게 암호화된 터널로 전송하므로, 해커가 중간에서 정보를 가로채도 암호를 풀기 어렵습니다.
2. 민감한 정보 입력 자제: 공용 와이파이를 사용하는 동안에는 온라인 뱅킹, 주식 거래, 중요한 이메일 확인, 비밀번호가 포함된 사이트 로그인 등 민감한 활동을 피하는 것이 가장 안전합니다.
3. 파일 공유 기능 비활성화: 사용 중인 기기의 **네트워크 파일 공유 기능(File Sharing)**&#xC744; 끄세요. 이 기능이 켜져 있으면 같은 와이파이를 쓰는 다른 사용자(해커 포함)가 내 기기에 접근하기 쉬워집니다.
4. HTTPS 확인: 웹사이트에 접속할 때 주소창에 **'HTTPS'**&#xAC00; 표시되는지 확인하세요. 'S'는 보안(Secure)을 의미하며, 해당 사이트와의 통신이 암호화된다는 뜻입니다.
5. Wi-Fi 자동 연결 기능 해제: 공공장소의 와이파이에 자동으로 연결되는 기능을 꺼두세요. 이는 해커가 만든 가짜 핫스팟에 무심코 연결되는 것을 방지합니다.



Q. 어떻게 조정하는 것일까?

프록시 서버를 조정해서 악용하는 방법은 주로 두 가지 시나리오로 이루어집니다. 하나는 사용자의 프록시 설정을 강제로 변경하는 것이고, 다른 하나는 사용자가 접속하는 네트워크 자체를 조작하여 공격자의 서버를 프록시처럼 경유하게 만드는 것입니다.

> 공격자가 프록시를 악용하는 주요 방법 (정보 탈취 시나리오)

**1. 장치 설정 조작 (프록시 설정 강제 변경)**

공격자가 사용자의 기기(스마트폰, 노트북 등)에 접근하여 인터넷 연결 설정을 직접 변경하는 방식입니다.

* 악성 파일/앱 설치 유도: 사용자가 악성 코드가 포함된 앱이나 파일을 다운로드하게 유도합니다. 이 악성 코드는 장치에 몰래 설치되어, Wi-Fi 또는 시스템의 인터넷 설정에 있는 프록시 서버 주소를 공격자가 운영하는 서버의 주소로 바꿔버립니다.
* 팝업/알림 이용: 일부 정교한 해킹 기법은 사용자가 웹사이트를 방문했을 때 "**보안 강화를 위해 프록시 설정을 변경하십시오."**&#xC640; 같은 가짜 팝업이나 시스템 알림을 띄워, 사용자가 직접 공격자의 프록시 서버 주소를 입력하도록 속이기도 합니다.

→ 결과: 사용자가 인터넷에 접속할 때마다 모든 데이터가 **(사용자) → (공격자의 프록시 서버) → (실제 웹사이트) 순서로 흘러가게 되며, 공격자는 이 데이터를 복사하거나 읽을 수 있게 됩니다.**

***

**2. 네트워크 조작 (가짜 Wi-Fi/공유기 해킹)**

공공장소(카페, 공항 등)의 Wi-Fi 네트워크 자체를 조작하여 모든 사용자의 트래픽이 자신을 거치도록 만듭니다.

* 가짜 핫스팟 생성 (Evil Twin Attack):
  * 공격자는 실제 카페 와이파이 이름과 똑같은 이름(SSID)의 가짜 와이파이 핫스팟을 만듭니다.
  * 사용자가 이 가짜 핫스팟에 연결하면, 공격자의 장치가 중간에서 라우터(공유기)와 프록시 서버의 역할을 동시에 수행하며 사용자의 트래픽을 가로챕니다.
* 공유기 설정 해킹:
  * 공격자가 취약한 iptime 등의 공용 공유기 관리자 페이지에 무단으로 접속합니다.
  * 접속 후 공유기 자체의 DNS 설정이나 라우팅 테이블을 조작하여, 해당 공유기에 연결된 모든 사용자의 트래픽이 공격자의 프록시 서버를 거치도록 만듭니다.

→ 결과: 사용자의 장치 설정은 건드리지 않아도, 와이파이 네트워크를 통과하는 순간 이미 공격자의 통제 하에 들어가게 됩니다.

**🛡️ 핵심 방어 방법: VPN 사용**

프록시를 이용한 대부분의 정보 탈취 공격은 데이터가 암호화되지 않은 상태에서 이루어질 때 성공합니다.

* VPN을 사용하면 사용자의 장치와 VPN 서버 사이에 강력하게 암호화된 터널이 생성됩니다.
* 공격자가 중간에 프록시 서버를 설정하여 트래픽을 가로채더라도, 그 내용은 암호화된 상태이기 때문에 해커는 내용을 해독할 수 없어 사실상 정보 탈취가 불가능해집니다.

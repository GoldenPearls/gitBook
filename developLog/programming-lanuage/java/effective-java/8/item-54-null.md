# item 54 : nullμ΄ μ•„λ‹, λΉ μ»¬λ ‰μ…μ΄λ‚ λ°°μ—΄μ„ λ°ν™ν•λΌ

## 1. nullμ„ λ°ν™ν•λ” κ²ƒμ λ‹¨μ 

**λ¬Έμ  μ½”λ“**:

```java
private final List<Cheese> cheesesInStock = new ArrayList<>();

public List<Cheese> getCheeses() {
    return cheesesInStock.isEmpty() ? null : new ArrayList<>(cheesesInStock);
}
```

* μ„ λ©”μ„λ“λ” `cheesesInStock`μ— **μ›μ†κ°€ μ—†μ„ λ• nullμ„ λ°ν™ν•**λ‹¤.
* μ΄λ΅ μΈν•΄ λ©”μ„λ“λ¥Ό νΈμ¶ν•λ” ν΄λΌμ΄μ–ΈνΈ μ½”λ“μ—μ„ **null μ²΄ν¬**λ¥Ό ν•„μμ μΌλ΅ ν•΄μ•Ό ν•λ‹¤. λ°©μ–΄μ½”λ“ ν•„μ!

**λ¬Έμ  ν™•μΈ**:

```java
@Test
public void getCheesesClient() {
    List<Cheese> cheeses = getCheeses();

    if (cheeses != null && cheeses.contains(Cheese.STILTON)) {
        System.out.println("μΆ‹μ•μ–΄, λ°”λ΅ κ·Έκ±°μ•Ό.");
    }
}
```

* `getCheeses()` λ©”μ„λ“λ¥Ό μ‚¬μ©ν•λ” ν΄λΌμ΄μ–ΈνΈλ” λ°λ“μ‹ `cheeses != null`κ³Ό κ°™μ€ μ΅°κ±΄λ¬Έμ„ μ‚¬μ©ν•΄ **nullμ„ μ²λ¦¬**ν•΄μ•Ό ν•λ‹¤.
* μ΄λ¬ν• null μ²λ¦¬λ” μ½”λ“λ¥Ό λ³µμ΅ν•κ² ν•κ³  **NullPointerException(NPE)μ„ μ λ°ν•  κ°€λ¥μ„±μ„ λ†’μΈλ‹¤.**
* **nullμ„ λ°ν™ν•μ§€ μ•λ” λ€μ•**

> **λΉ λ¦¬μ¤νΈλ¥Ό λ°ν™**ν•λ©΄ ν΄λΌμ΄μ–ΈνΈ μ½”λ“μ—μ„ μ¶”κ°€μ μΈ null μ²λ¦¬λ¥Ό ν•μ§€ μ•μ•„λ„ λλ©°, μ½”λ“κ°€ κ°„λ‹¨ν•΄μ§€κ³  **μ•μ „ν•΄μ§„λ‹¤**.

{% hint style="danger" %}
**nullμ„ λ°ν™ν•λ” κ²ƒμ΄ μ„±λ¥μƒ λ‚«μ§€ μ•μ€κ°€?**:
{% endhint %}

* μ±…μ—μ„λ” μ΄ λ¬Όμμ΄ ν‹€λ Έλ‹¤κ³  λ‹µν•λ‹¤.
* λ¬Όλ΅  μƒλ΅μ΄ κ°μ²΄λ¥Ό ν•λ‚ λ§λ“¤μ§€λ§ μ‚¬μ‹¤μƒ μ„±λ¥μƒμ μ»¤λ‹¤λ€ μ†ν•΄κ°€ μ—†λ‹¤. (λ―Έλ―Έν•λ‹¤.)
* λΉ μ»¬λ ‰μ…κ³Ό λ°°μ—΄μ€ κµ³μ΄ μƒλ΅ ν• λ‹Ήν•μ§€ μ•κ³ λ„ λ°ν™ κ°€λ¥ν•λ‹¤.
  * λΉ μ»¬λ ‰μ…μ„ λ¶λ³€μΌλ΅ μ„ μ–Έν•΄λ†“κ³  κ°™μ€ μΌ€μ΄μ¤μ— κ³„μ† μ¬ν™μ©ν•΄μ„ ν• λ‹Ήν•΄λ„ λλ‹¤.
  * Collections.emptyList(), Collections.emptySet(), Collections.emptyMap()λ„ μλ‹¤.

## 2. nullμ„ λ°ν™ν•μ§€ μ•λ” λ€μ•

### **1) μ»¬λ ‰μ… μƒμ„±μλ¥Ό μ΄μ©ν•λ” λ°©λ²•**:

```java
public List<Cheese> getCheeses2() {
    return new ArrayList<>(cheesesInStock);
}
```

* μ΄ λ°©λ²•μ€ μƒλ΅μ΄ λ¦¬μ¤νΈλ¥Ό λ§λ“¤μ–΄ λ°ν™ν•©
* μ‚¬μ© ν¨ν„΄μ— λ”°λΌ μ„±λ¥μ— μν–¥μ„ μ¤„ μ μμ§€λ§, λ€λ¶€λ¶„μ κ²½μ° ν° λ¬Έμ κ°€ λμ§€ μ•λ”λ‹¤.

### **2) κΈΈμ΄ 0μ§λ¦¬ λ°°μ—΄μ„ λ°ν™ν•λ” λ°©λ²•**:

```java
public Cheese[] getCheeses3() {
    return cheesesInStock.toArray(new Cheese[0]);
}
```

* λ°°μ—΄μ„ λ°ν™ν•  λ•λ„ **null λ€μ‹  κΈΈμ΄ 0μ§λ¦¬ λ°°μ—΄**μ„ λ°ν™ν•λ” κ²ƒμ΄ λ” μΆ‹λ‹¤.

### **3) λ¶λ³€μΈ λΉ λ°°μ—΄μ„ μ‚¬μ©ν•λ” λ°©λ²•**:

```java
private static final Cheese[] EMPTY_CHEESE_ARRAY = new Cheese[0];

public Cheese[] getCheeses4() {
    return cheesesInStock.toArray(EMPTY_CHEESE_ARRAY);
}
```

* `EMPTY_CHEESE_ARRAY`λ¥Ό μ‚¬μ©ν•΄ **μ¬μ‚¬μ© κ°€λ¥ν• λΉ λ°°μ—΄**μ„ λ°ν™ν•λ‹¤.
* μ„±λ¥μƒ **λ°°μ—΄μ„ λ§¤λ² μƒμ„±ν•μ§€ μ•κΈ° λ•λ¬Έμ— ν¨μ¨μ **

1. **toArray()μ λ™μ‘ λ°©μ‹**:
   * `toArray()`λ” λ§¤κ°λ³€μλ΅ λ°›μ€ λ°°μ—΄μ ν¬κΈ°μ— λ”°λΌ λ™μ‘μ΄ λ‹¬λΌμ§„λ‹¤.
     * λ°°μ—΄μ΄ **μ¶©λ¶„ν ν¬λ©΄** μ›μ†λ¥Ό λ‹΄μ•„ λ°ν™ν•λ‹¤.
     * κ·Έλ ‡μ§€ μ•μΌλ©΄ λ°°μ—΄μ„ **μƒλ΅ μƒμ„±**ν•μ—¬ κ·Έ μ•μ— μ›μ†λ¥Ό λ‹΄μ•„ λ°ν™ν•λ‹¤.
   * **κΈΈμ΄ 0μ§λ¦¬ λ°°μ—΄**μ„ λ§¤κ°λ³€μλ΅ μ‚¬μ©ν•λ©΄, JVMμ΄ λ” ν¨μ¨μ μΌλ΅ μƒ λ°°μ—΄μ„ μƒμ„±ν•΄μ£Όλ” μµμ ν™”κ°€ μ΄λ£¨μ–΄μ§ μ μλ‹¤.

## π“ ν•µμ‹¬ μ •λ¦¬

<figure><img src="../../../../.gitbook/assets/image (4) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1).png" alt=""><figcaption></figcaption></figure>

1. **null λ°ν™μ„ ν”Όν•κ³  λΉ μ»¬λ ‰μ…μ΄λ‚ λ°°μ—΄μ„ λ°ν™ν•μ**:
   * λ°°μ—΄μ΄λ‚ μ»¬λ ‰μ…μ„ λ°ν™ν•  λ•λ” **null λ€μ‹  λΉ μ»¬λ ‰μ…μ΄λ‚ λ°°μ—΄**μ„ λ°ν™ν•λ” κ²ƒμ΄ μΆ‹λ‹¤.
   * μ΄λ¥Ό ν†µν•΄ API μ‚¬μ©μμ—κ² **μ¶”κ°€μ μΈ null μ²΄ν¬ λ¶€λ‹΄**μ„ μ¤„μ—¬μ¤„ μ μμΌλ©°, μ½”λ“μ μ•μ „μ„±μ„ λ†’μΈλ‹¤.
2. **null λ°ν™μ λ‹¨μ **:
   * **API μ‚¬μ© μ‹ κ³ λ ¤ν•  μ **μ΄ λ§μ•„μ§€κ³ , **nullμ„ μ²λ¦¬ν•μ§€ μ•μΌλ©΄ NPE**κ°€ λ°μƒν•  μ μλ” μ„ν—μ΄ ν¬λ‹¤.
   * μ΄λ¬ν• **λ¶ν•„μ”ν• null μ²λ¦¬λ” μ½”λ“μ κ°€λ…μ„±μ„ λ–¨μ–΄λ¨λ¦¬κ³  μ¤λ¥λ¥Ό μ λ°**ν•  κ°€λ¥μ„±μ΄ λ†’μ•„μ§„λ‹¤.
3. **μ„±λ¥ μµμ ν™”**:
   * **λΉ μ»¬λ ‰μ…μ΄λ‚ λ°°μ—΄**μ„ λ°ν™ν•λ” κ²ƒμ΄ μ„±λ¥ λ©΄μ—μ„ ν° μ°¨μ΄κ°€ μ—†μΌλ©°, λ•λ΅λ” **μ¬μ‚¬μ© κ°€λ¥ν• λ¶λ³€ κ°μ²΄**λ¥Ό ν™μ©ν•΄ μµμ ν™”ν•  μλ„ μλ‹¤.
   * μλ¥Ό λ“¤μ–΄ `Collections.emptyList()`, `Collections.emptySet()`, `Collections.emptyMap()`μ€ **JVMμ—μ„ λ―Έλ¦¬ μ¤€λΉ„λ κ°μ²΄λ¥Ό μ¬μ‚¬μ©ν•λ” λ°©μ‹**μΌλ΅ λ§¤μ° ν¨μ¨μ 

## π² κ³ λ ¤ν•΄μ•Ό ν•  μ 

1. **μ½”λ“μ μ•μ „μ„±**:
   * nullμ„ λ°ν™ν•λ” λ€μ‹  **λΉ κ°μ²΄λ¥Ό λ°ν™**ν•¨μΌλ΅μ¨ μ½”λ“κ°€ **λ³΄λ‹¤ μ•μ „ν•κ³  κ°„κ²°**ν•΄μ§„λ‹¤. NPEμ™€ κ°™μ€ **λ°νƒ€μ„ μμ™Έ λ°μƒμ„ λ°©μ§€**ν•  μ μμ–΄ APIμ μ‹ λΆ°μ„±μ΄ λ†’μ•„μ§„λ‹¤.
2. **μ½κΈ° μ „μ© μ»¬λ ‰μ… μ‚¬μ©**:
   * κ°€λ¥ν•λ©΄ **λ¶λ³€ μ»¬λ ‰μ…**μ„ λ°ν™ν•λ” κ²ƒμ΄ μΆ‹λ‹¤. μλ¥Ό λ“¤μ–΄, `Collections.emptyList()`λ‚ `Collections.unmodifiableList()`λ¥Ό μ‚¬μ©ν•΄ λ°ν™λ μ»¬λ ‰μ…μ„ μμ •ν•μ§€ λ»ν•λ„λ΅ ν•λ©΄, **λ¶ν•„μ”ν• μ‚¬μ΄λ“ μ΄ν™νΈ**λ¥Ό λ°©μ§€ν•  μ μλ‹¤.
3. **μ„±λ¥κ³Ό μ¬μ‚¬μ©μ„±**:
   * λΉ μ»¬λ ‰μ…μ΄λ‚ λ°°μ—΄μ„ μ¬μ‚¬μ©ν•¨μΌλ΅μ¨ **μ„±λ¥μ μΈ μ΄μ **μ„ μ–»μ„ μ μλ‹¤. λΉ κ°μ²΄λ¥Ό λ§¤λ² μƒλ΅ μƒμ„±ν•μ§€ μ•κ³ , λ―Έλ¦¬ μ„ μ–Έν• λΉ κ°μ²΄λ¥Ό μ¬μ‚¬μ©ν•λ” κ²ƒμ΄ λ” ν¨μ¨μ λ‹¤.
4. **ν΄λΌμ΄μ–ΈνΈ μ½”λ“μ κ°„κ²°μ„±**:
   * nullμ„ λ°ν™ν•λ©΄ ν΄λΌμ΄μ–ΈνΈ μ½”λ“κ°€ μ΄λ¥Ό **λ…μ‹μ μΌλ΅ μ²΄ν¬**ν•΄μ•Ό ν•λ―€λ΅ μ½”λ“κ°€ λ³µμ΅ν•΄μ§„λ‹¤. λΉ μ»¬λ ‰μ…μ„ λ°ν™ν•λ©΄ μ΄λ° μ²΄ν¬κ°€ ν•„μ” μ—†μ–΄μ Έ **μ½”λ“κ°€ κ°„κ²°**ν•΄μ§€κ³  **μ μ§€λ³΄μ**κ°€ μ‰¬μ›μ§„λ‹¤.

> κ²°λ΅ μ μΌλ΅, **nullμ„ λ°ν™ν•μ§€ λ§κ³  λΉ μ»¬λ ‰μ…μ΄λ‚ λ°°μ—΄μ„ λ°ν™ν•λ” κ²ƒμ΄** μ„±λ¥κ³Ό μ•μ „μ„± λ©΄μ—μ„ λ” μΆ‹λ‹¤. null μ²΄ν¬λ¥Ό μµμ†ν™”ν•κ³ , ν΄λΌμ΄μ–ΈνΈ μ½”λ“μ κ°„κ²°ν•¨κ³Ό μ μ§€λ³΄μμ„±μ„ λ†’μ΄λ©°, μ„±λ¥μƒμΌλ΅λ„ ν° μ°¨μ΄κ°€ μ—†κΈ° λ•λ¬Έμ— **μµμ„ μ μ„ νƒ**



> μ°Έκ³  λ° μ¶μ²
>
> * [https://jake-seo-dev.tistory.com/527](https://jake-seo-dev.tistory.com/527)
